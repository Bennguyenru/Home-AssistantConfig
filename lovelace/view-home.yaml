title: Overview
id: home
path: home
icon: mdi:home
cards:
  - type: vertical-stack
    cards:
    - type: custom:simple-weather-card
      #entity: weather.accuhome
      entity: weather.openweathermap
      name: at home
      backdrop: 
        fade: true
        day: '#666677'
        night: '#444466'
      primary_info:
        - extrema
        - precipitation
        - precipitation_probability
      secondary_info:
        - wind_speed
        - wind_bearing
    - type: custom:hourly-weather
      name: ~
      entity: weather.home_hourly
      icons: true
      num_segments: 24
    - type: horizontal-stack
      cards:
      - type: entity
        #entity: weather.accuhome
        entity: weather.openweathermap
        attribute: 'temperature'
        name: Outside
        icon: 'mdi:thermometer'
        unit: 'Â°C'
      - type: entity
        entity: sensor.downstairs_temperature
        name: Downstairs
        icon: 'mdi:thermometer'
      - type: entity
        entity: sensor.upstairs_temperature
        name: Upstairs
        icon: 'mdi:thermometer'
  

  - type: vertical-stack
    cards:
    - type: glance
      columns: 5
      show_name: false
      style: |
        ha-card {
          background: {% if is_state('alarm_control_panel.ha_alarm', 'disarmed') %} #4c5c4c {% elif is_state('alarm_control_panel.ha_alarm', 'triggered') %} #6c3c3c {% else %} #6c4c1c {% endif %};
        }
      entities:
        - alarm_control_panel.ha_alarm
        - input_text.person_person3
        - input_text.person_person1
        - input_text.person_person2
        - input_text.person_person4

    - type: custom:frigate-card
      cameras:
        - camera_entity: camera.front
          camera_name: front
          frigate_url: http://192.168.0.13:5000/
          live_provider: webrtc-card
          title: Front
          webrtc_card:
            entity: camera.front_camera_lowres
        - camera_entity: camera.garage
          camera_name: garage
          frigate_url: http://192.168.0.13:5000/
          live_provider: webrtc-card
          title: Garage
          webrtc_card:
            entity: camera.garage
      live:
        webrtc_card:
          ui: true
        controls:
          next_previous:
            size: 24
      menu:
        style: outside
        position: bottom

    - type: custom:auto-entities
      show_empty: false
      card: 
        type: glance
        title: Unavailable entities
      filter:
        include:
          - state: "unavailable"
            options:
              show_last_changed: true
        exclude:
          - name: /Plex/
          - integration: 'here_travel_time'
          - entity_id: "/.*_old/"
          - entity_id: "/.roku_x00200y5s7lx_.*/"
          - entity_id: "binary_sensor.kelsie_*"
          - entity_id: "media_player.samsung_tv"
          - entity_id: "media_player.cast_living_room_tv"
          - entity_id: "media_player.forked_daapd_*"
          - entity_id: "sensor.accuhome_*"
          - entity_id: "sensor.kelsie_*"
          - entity_id: "sensor.pixel_xl_next_alarm"
          - entity_id: "sensor.tasmota_car_*"
          - entity_id: "sensor.*_minecraft*"
          - entity_id: "sensor.home_*"
          - entity_id: "sensor.other_*"
          - entity_id: "weather.*"
          - entity_id: "sensor.*weather*"
          - entity_id: "device_tracker.*"

    - type: custom:auto-entities
      show_empty: false
      card: 
        type: entities
        title: Alerts
      filter:
        include:
          - domain: alert
            state: 'on'
            options:
              show_last_changed: true
        
    - type: custom:auto-entities
      show_empty: false
      card: 
        type: glance
        title: Leaks
      filter:
        include:
          - domain: binary_sensor
            attributes:
              device_class: 'moisture'
            options:
              show_last_changed: true
            state: 'on'

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Occupied rooms
      #show_state: false
    filter:
      include:
        - entity_id: input_boolean.*_occupied
          state: 'on'
          options:
            show_last_changed: true
      exclude:
        - entity_id: input_boolean.home_occupied

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Media players
      #show_state: false
    filter:
      include:
        - domain: media_player
          state: 'on'
          options:
            show_last_changed: true
        - domain: media_player
          state: 'playing'
          options:
            show_last_changed: true

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Presence
      #show_state: false
    filter:
      include:
        - domain: binary_sensor
          state: 'on'
          attributes: 
            device_class: 'motion'
          options:
            show_last_changed: true
        - domain: binary_sensor
          state: 'on'
          attributes: 
            device_class: 'presence'
          options:
            show_last_changed: true
      exclude:
        - device_manufacturer: 'Frigate'

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Windows and doors
      #show_state: false
    filter:
      include:
        - group: group.my_exterior_doors
          state: 'on'
          options:
            show_last_changed: true
        - group: group.my_downstairs_windows
          state: 'on'
          options:
            show_last_changed: true
        - group: group.my_upstairs_windows
          state: 'on'
          options:
            show_last_changed: true
        - entity: binary_sensor.garden_gate_contact
          state: 'on'
          options:
            show_last_changed: true

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Interior doors
      #show_state: false
    filter:
      include:
        - group: group.my_interior_doors
          state: 'off'

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Lights
      #show_state: false
    sort:
      method: name
    filter:
      include:
        - domain: light
          state: 'on'
          options:
            show_last_changed: true
        - entity_id: switch.vestibule_socket
          state: 'on'
          options:
            show_last_changed: true
        - entity_id: switch.living_room_cabinet_light
          state: 'on'
          options:
            show_last_changed: true
        - entity_id: switch.garden_lights
          state: 'on'
          options:
            show_last_changed: true
        - entity_id: switch.living_room_christmas_tree
          state: 'on'
          options:
            show_last_changed: true
      exclude:
        - entity_id: light.living_room_lamps
        - entity_id: light.living_room
        - entity_id: light.yeelight_*
        - entity_id: light.bedroom_lights
