title: Overview
id: home
path: home
icon: mdi:home
cards:
  - type: vertical-stack
    cards:
    - type: custom:simple-weather-card
      #entity: weather.accuhome
      entity: weather.home
      name: in current location
      backdrop: 
        fade: true
        day: '#666677'
        night: '#444466'
      primary_info:
        - extrema
        - precipitation
        - precipitation_probability
      secondary_info:
        - wind_speed
        - wind_bearing
    - type: horizontal-stack
      cards:
      - type: entity
        #entity: weather.accuhome
        entity: weather.home
        attribute: 'temperature'
        name: Outside
        icon: 'mdi:thermometer'
        unit: 'Â°C'
      - type: entity
        entity: sensor.downstairs_temperature
        name: Downstairs
        icon: 'mdi:thermometer'
      - type: entity
        entity: sensor.upstairs_temperature
        name: Upstairs
        icon: 'mdi:thermometer'
  
    - type: custom:weather-card
      entity: weather.accuhome
      current: true
      details: true
      forecast: true

  - type: vertical-stack
    cards:
    - type: glance
      columns: 5
      show_name: false
      style: |
        ha-card {
          background: {% if is_state('alarm_control_panel.ha_alarm', 'disarmed') %} #4c5c4c {% elif is_state('alarm_control_panel.ha_alarm', 'triggered') %} #6c3c3c {% else %} #6c4c1c {% endif %};
        }
      entities:
        - alarm_control_panel.ha_alarm
        - input_text.person_person3
        - input_text.person_person1
        - input_text.person_person2
        - input_text.person_person4

    - type: entity-filter
      show_empty: false
      state_filter:
        - 'on'
      card:
        type: glance
        title: Occupied rooms
        show_state: false
      entities:
        - entity: input_boolean.family_room_occupied
          name: Family room
          icon: mdi:google-controller
        - entity: input_boolean.living_room_occupied
          name: Living room
        - entity: input_boolean.office_occupied
          name: Office

    - type: custom:auto-entities
      show_empty: false
      card: 
        type: glance
        title: Unavailable entities
      filter:
        include:
          - state: "unavailable"
        exclude:
          - name: /Plex/
          - entity_id: "sensor.pixel_xl_next_alarm"
        
    - type: entity-filter
      entities:
        - entity: alert.garage_door_l
          name: Garage door, bike
        - entity: alert.garage_door_r
          name: Garage door, car
        - entity: alert.flood_while_home
          name: Flood detected while at home
        - entity: alert.flood_while_away
          name: Flood detected while at away
      show_empty: false
      state_filter:
        - 'on'
      card:
        type: entities
        title: Alerts

    - type: entity-filter
      show_empty: false
      state_filter:
        - 'on'
      card:
        type: glance
        title: Leaks detected
        show_state: false
      entities:
        - entity: binary_sensor.bathroom_water_leak_water_leak
          name: Bathroom
        - entity: binary_sensor.master_ensuite_leak_water_leak
          name: Master ensuite
        - entity: binary_sensor.second_ensuite_water_leak
          name: Second ensuite
        - entity: binary_sensor.kitchen_water_leak_water_leak
          name: Kitchen
        - entity: binary_sensor.toilet_water_leak_water_leak
          name: Toilet
        - entity: binary_sensor.utility_room_water_leak_water_leak
          name: Utility room

    - type: custom:webrtc-camera
      entity: camera.front_camera_lowres

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Media players
      show_state: false
    filter:
      include:
        - domain: media_player
          state: 'on'
        - domain: media_player
          state: 'playing'
        - entity: device_tracker.family_tv
          state: 'home'

      
  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Motion sensors
      show_state: false
    filter:
      include:
        - domain: binary_sensor
          state: 'on'
          attributes: 
            device_class: 'motion'
      exclude:
        - entity_id: binary_sensor.pi3_living_room_motion

  - type: custom:auto-entities
    show_empty: false
    card: 
      type: glance
      title: Windows and doors
      show_state: false
    filter:
      include:
        - group: group.my_exterior_doors
          state: 'on'
        - group: group.my_downstairs_windows
          state: 'on'
        - group: group.my_upstairs_windows
          state: 'on'

  - type: entity-filter
    entities:
      - entity: binary_sensor.office_door_contact
        name: Office
      - entity: binary_sensor.master_bedroom_door_contact
        name: Master bedroom
      - entity: binary_sensor.master_ensuite_door_contact
        name: Master ensuite
      - entity: binary_sensor.guest_bedroom_door_contact
        name: Guest bedroom
      - entity: binary_sensor.second_bedroom_door_contact
        name: Second bedroom
      - entity: binary_sensor.bathroom_door_contact
        name: Bathroom
      - entity: binary_sensor.vestibule_door_contact
        name: Vestibule
    show_empty: false
    state_filter:
      - 'off'
    card:
      type: glance
      columns: 4
      title: Interior doors (closed)
      show_state: false

  - type: entity-filter
    entities:
      - entity: switch.pi3_garden_lights_switch
        name: Garden
        tap_action: 
          action: toggle
      - entity: light.master_bedroom_bedhead
        name: Master bedhead
      - entity: light.person1_bedroom_bedside
        name: person1's Bedhead
      - entity: switch.pi3_family_room_socket_switch
        name: Family room
        tap_action: 
          action: toggle
      - entity: light.downstairs_hall
        name: "Hall"
      - entity: switch.pi3_hall_downstairs_switch
        name: "Hall socket"
        tap_action: 
          action: toggle
      - entity: switch.pi3_vestibule_switch
        name: "Vestibule socket"
        tap_action: 
          action: toggle
      - entity: light.living_room_table_lamp
        name: Table
      - entity: light.living_room_tv_lamp
        name: "TV"
        tap_action: 
          action: toggle
      - entity: light.living_room_corner_lamp
        name: "Corner"
        tap_action: 
          action: toggle
      - entity: switch.pi3_livingroom_socket_switch
        name: "Cabinet"
        tap_action: 
          action: toggle
      - entity: light.office_strip
        name: Office strip
        tap_action: 
          action: toggle
    show_empty: false
    state_filter:
      - 'on'
    card:
      type: glance
      columns: 4
      title: Lights
      show_state: false
