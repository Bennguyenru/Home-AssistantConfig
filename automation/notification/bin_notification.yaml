id: 'bin_notification'
initial_state: 'on'
alias: 'Bin notification'
trigger:
  - platform: time_pattern
    minutes: '/5'
    seconds: '30'
condition:
  - condition: state
    entity_id: input_boolean.living_room_occupied
    state: 'on'
  - condition: or
    conditions:
      - condition: state
        entity_id: sensor.bin_brown
        state: 'tomorrow'
      - condition: state
        entity_id: sensor.bin_blue
        state: 'tomorrow'
      - condition: state
        entity_id: sensor.bin_grey
        state: 'tomorrow'
action:
  - delay: '00:01:00'
  - service: notify.lm_notify
    data:
      message: >-
        Tomorrow the 
        {%- if is_state('sensor.bin_brown', 'tomorrow') %}
           brown bin
        {%- elif is_state('sensor.bin_blue', 'tomorrow') %}
           blue bin
        {%- else %}
           grey bin
        {%- endif %}
        is being collected
