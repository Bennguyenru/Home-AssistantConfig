id: 'utility_remote'
alias: 'Utility remote'
description: 'Toggle the garden lights when the remote is operated. They can turn off at any time, but only turn on when the sun has set'
initial_state: 'on'
trigger:
  - platform: state
    entity_id: sensor.utility_remote_action
    to: 
    - 'single'
    - 'double'
    - 'hold'
condition:
  - condition: or
    conditions:
      - condition: state
        entity_id: switch.pi3_garden_lights_switch
        state: 'on'
      - condition: and
        conditions:
          - condition: state
            entity_id: sun.sun
            state: below_horizon
          - condition: state
            entity_id: switch.pi3_garden_lights_switch
            state: 'off'
action:
  - service: switch.toggle
    data:
      entity_id: switch.pi3_garden_lights_switch
